% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hotSpotR.R
\name{extract_hotspots}
\alias{extract_hotspots}
\title{Extract Hotspots of Change for Ecosystem Services}
\usage{
extract_hotspots(
  df,
  threshold = 0.1,
  use_percentile = TRUE,
  direction = "both"
)
}
\arguments{
\item{df}{A data.frame or tibble. Must include columns: \code{service}, \code{HYBAS_ID}, and \code{pct_ch}.}

\item{threshold}{Numeric. Either a percentile (if \code{use_percentile = TRUE}) or an integer count of top/bottom values.}

\item{use_percentile}{Logical. If TRUE (default), \code{threshold} is treated as a percentile (e.g., 0.1 for 10\%).}

\item{direction}{Character. One of "both" (default), "top", or "bottom".}
}
\value{
A list with two tibbles:
\itemize{
\item \code{df_hotspots}: long-format tibble with an added column \code{hotspot_flag} per service and record.
\item \code{hotspot_summary}: summarised tibble with a \code{hotspot_binary} column and a cleaned list of hotspot services per unit.
}
}
\description{
This function identifies spatial units (e.g., basins) with the most extreme changes
in ecosystem service provision based on percentiles or absolute counts. It returns both a
long-format dataframe with hotspot flags per service and a summary showing for each unit
how many services it is a hotspot for.
}
\examples{
result <- extract_hotspots(df, threshold = 0.1)
result$df_hotspots
result$hotspot_summary

}
