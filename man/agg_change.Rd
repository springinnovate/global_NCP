% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/agg_change.R
\name{agg_change}
\alias{agg_change}
\alias{aggregate_change_simple}
\title{Aggregate trimmed change by group}
\usage{
agg_change(
  plt_long,
  group_col,
  cut_q = 0.999,
  drop_zeros = TRUE,
  svc_order = NULL,
  svc_order_only = TRUE,
  include_global = FALSE
)

aggregate_change_simple(
  plt_long,
  group_col,
  cut_q = 0.999,
  drop_zeros = TRUE,
  svc_order = NULL,
  include_global = FALSE,
  keep_only_ordered = TRUE
)
}
\arguments{
\item{plt_long}{A data frame with columns \code{service}, \code{abs_chg}, \code{pct_chg},
and the grouping column.}

\item{group_col}{Character scalar naming the grouping column (e.g., "region_wb").}

\item{cut_q}{Numeric in (0,1); trim quantile for |change| (default \code{0.999}).}

\item{drop_zeros}{Logical; drop rows where both metrics are 0 (default \code{TRUE}).}

\item{svc_order}{Optional character vector to set facet/order; if provided,
you can restrict to just these services when \code{keep_only_ordered = TRUE}.}

\item{include_global}{Logical; if \code{TRUE} add a “Global” row per service.}

\item{keep_only_ordered}{Logical; if \code{TRUE} (default) drop services not in
\code{svc_order}. Set to \code{FALSE} to append any extras after your order.}
}
\value{
A tibble with columns: \code{service}, \code{{group_col}}, \code{abs_mean}, \code{pct_mean}.
}
\description{
Computes trimmed means of absolute and percent change per service within a
grouping (e.g., World Bank region). Extreme cell values are capped at a
per-service quantile (trim) before aggregation.
}
