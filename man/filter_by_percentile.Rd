% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/perc_filteR.R
\name{filter_by_percentile}
\alias{filter_by_percentile}
\title{Filter Observations by Percentile Range within Groups}
\usage{
filter_by_percentile(
  df,
  var = "pct_ch",
  group_var = "service",
  filter_type = c("both", "top", "bottom"),
  percentile = 0.1
)
}
\arguments{
\item{df}{A \code{data.frame} or \code{tibble} containing the data.}

\item{var}{A character string specifying the name of the numeric column to filter on (e.g., \code{"pct_ch"}).}

\item{group_var}{A character string specifying the grouping variable (e.g., \code{"service"}).}

\item{filter_type}{A character string indicating whether to filter the \code{"top"}, \code{"bottom"}, or \code{"both"} ends.}

\item{percentile}{A numeric value between 0 and 1 indicating the proportion of extreme values to keep
(e.g., \code{0.10} keeps the top and/or bottom 10\%). Default is \code{0.10}.}
}
\value{
A filtered \code{tibble} containing only the observations within the specified percentile range.
}
\description{
Filters a data frame to retain only the top, bottom, or both extremes of a numeric variable
within groups (e.g., by ecosystem service). This is useful for identifying spatial units
or observations that show extreme values of change or impact across services.
}
\examples{
# Filter top and bottom 10\% of pct_ch within each service
df_top_bottom <- filter_by_percentile(df, var = "pct_ch", group_var = "service",
                                      filter_type = "both", percentile = 0.10)

# Filter only the top 5\% of pct_ch
df_top <- filter_by_percentile(df, filter_type = "top", percentile = 0.05)

# Filter only the bottom 1\% of pct_ch
df_bottom <- filter_by_percentile(df, filter_type = "bottom", percentile = 0.01)
}
